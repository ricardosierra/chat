{"version":3,"file":"http.js","sourceRoot":"","sources":["../../src/transports/http.ts"],"names":[],"mappings":";;;AAAA,qCAA2C;AAE3C,2BAA6B;AAC7B,mDAAqD;AACrD,+BAAuC;AAEvC,iCAAiC;AACjC;IAAmC,yCAAa;IAC9C,+CAA+C;IAC/C,uBAA0B,OAAyB;QAAnD,YACE,kBAAM,OAAO,CAAC,SAOf;QARyB,aAAO,GAAP,OAAO,CAAkB;QAEjD,KAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACnB,IAAM,KAAK,GAAG,OAAO,CAAC,SAAS,IAAI,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC;QAC1D,KAAI,CAAC,MAAM,GAAG,KAAK;YACjB,CAAC,CAAC,yCAAyC;gBACxC,IAAI,eAAe,CAAC,KAAK,CAAgB;YAC5C,CAAC,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,UAAU,EAAE,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;;IAC1E,CAAC;IAED;;OAEG;IACU,iCAAS,GAAtB,UAAuB,IAAY;;;gBACjC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;oBAChB,MAAM,IAAI,kBAAW,CAAC,sCAAsC,CAAC,CAAC;iBAC/D;gBACD,sBAAO,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,EAAC;;;KAC/C;IACH,oBAAC;AAAD,CAAC,AArBD,CAAmC,oBAAa,GAqB/C;AArBY,sCAAa","sourcesContent":["import { SentryError } from '@sentry/core';\nimport { SentryResponse, TransportOptions } from '@sentry/types';\nimport * as http from 'http';\nimport * as HttpsProxyAgent from 'https-proxy-agent';\nimport { BaseTransport } from './base';\n\n/** Node http module transport */\nexport class HTTPTransport extends BaseTransport {\n  /** Create a new instance and set this.agent */\n  public constructor(public options: TransportOptions) {\n    super(options);\n    this.module = http;\n    const proxy = options.httpProxy || process.env.http_proxy;\n    this.client = proxy\n      ? // tslint:disable-next-line:no-unsafe-any\n        (new HttpsProxyAgent(proxy) as http.Agent)\n      : new http.Agent({ keepAlive: false, maxSockets: 30, timeout: 2000 });\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public async sendEvent(body: string): Promise<SentryResponse> {\n    if (!this.module) {\n      throw new SentryError('No module available in HTTPTransport');\n    }\n    return this.sendWithModule(this.module, body);\n  }\n}\n"]}